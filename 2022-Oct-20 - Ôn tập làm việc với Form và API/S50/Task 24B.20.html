
<!DOCTYPE html>
<html lang="en">

<head>
    <title> All APIs sample cho Devcamp Project</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<style>
    .divider {
        border-bottom: 2px solid #0163ee;
        margin-top: 2rem;
        margin-bottom: 2rem;
        width: 23rem;
    }
</style>
<script>
    const gREQUEST_STATUS_OK = 200;
    const gREQUEST_CREATE_OK = 201; // status 201 là tạo mới thành công
    const gREQUEST_READY_STATUS_FINISH_AND_OK = 4;

    const gBASE_URL = "https://62454a477701ec8f724fb923.mockapi.io/api/v1/";

    /********** API FOR SCHOOL PROJECT ***********/

    // API lấy danh sách sinh viên (Students)
    function onGetStudentListClick() {
        var vAPI_URL = gBASE_URL + "/students/";
        var vXhttp = new XMLHttpRequest();
        vXhttp.onreadystatechange = function () {
            if (this.readyState == gREQUEST_READY_STATUS_FINISH_AND_OK && this.status == gREQUEST_STATUS_OK) {
                console.log(vXhttp.responseText); // ghi response text ra console.log
            }
        };
        vXhttp.open("GET", vAPI_URL, true);
        vXhttp.send();
    }

    // API lấy thông tin sinh viên theo id (Students)
    function onGetStudentByIdClick() {
        var vAPI_URL = gBASE_URL + "/students/";
        var vStudentId = 5;
        var vXhttp = new XMLHttpRequest();
        vXhttp.open("GET", vAPI_URL + vStudentId, true);
        vXhttp.send();

        vXhttp.onreadystatechange = function () {
            if (this.readyState == gREQUEST_READY_STATUS_FINISH_AND_OK && this.status == gREQUEST_STATUS_OK) {
                console.log(vXhttp.responseText); // ghi response text ra console.log
            }
        };
    }

     // API sửa sinh viên (Students)
     function onEditStudentClick() {
        var vAPI_URL = gBASE_URL + "/students/";
        var vStudentId = 5; // id student được sửa
        // đối tượng student sẽ được tạo mới
        var vStudentObjRequest = {
                studentCode: 21074780,
                username: "namvh",
                firstname: "Nam",
                lastname: "Vo Hoang",
                birthday: "15/03/1994",
                email: "nam.vohoang@gmail.com",
                studyYear: 2019
            };
        
        var vXmlHttp = new XMLHttpRequest();
        vXmlHttp.open("PUT", vAPI_URL + vStudentId, true);
        vXmlHttp.setRequestHeader("Content-Type", "application/json");
        vXmlHttp.send(JSON.stringify(vStudentObjRequest));

        vXmlHttp.onreadystatechange = function () {
            if (this.readyState == gREQUEST_READY_STATUS_FINISH_AND_OK && this.status == gREQUEST_STATUS_OK) {
                console.log(this.responseText); // ghi response text ra console.log
            }
        };
    }

    // API tạo mới sinh viên (Students)
    function onCreateStudentClick() {
        var vAPI_URL = gBASE_URL + "/students/";
        // đối tượng student sẽ được tạo mới
        var vStudentObjRequest = {
                studentCode: 21074780,
                username: "namvh",
                firstname: "Nam",
                lastname: "Vo Hoang",
                birthday: "15/03/1994",
                email: "nam.vohoang@gmail.com",
                studyYear: 2019
            };
        
        var vXmlHttp = new XMLHttpRequest();
        vXmlHttp.open("POST", vAPI_URL, true);
        vXmlHttp.setRequestHeader("Content-Type", "application/json");
        vXmlHttp.send(JSON.stringify(vStudentObjRequest));

        vXmlHttp.onreadystatechange = function () {
            if (this.readyState == gREQUEST_READY_STATUS_FINISH_AND_OK && this.status == gREQUEST_CREATE_OK) {
                console.log(this.responseText); // ghi response text ra console.log
            }
        };
    }

    // API để xóa (delete) một student theo Id
    function onDeleteStudentClick() {
        const vAPI_URL = gBASE_URL + "/students/";
        // id student sẽ xóa
        var vStudentId = 10;
        
        var vXmlhttp = new XMLHttpRequest();
        vXmlhttp.open("DELETE", vAPI_URL + vStudentId, true);
        vXmlhttp.send();

        vXmlhttp.onreadystatechange = function() {
            // xóa thành công student
            if (this.readyState == gREQUEST_READY_STATUS_FINISH_AND_OK && this.status == gREQUEST_STATUS_OK) {
                console.log("Delete student " + vStudentId + " thành công!");
            }
        }
    }

    // API lấy danh sách môn học (Subjects)
    function onGetSubjectListClick() {
        var vAPI_URL = gBASE_URL + "/subjects/";
        var vXhttp = new XMLHttpRequest();
        vXhttp.onreadystatechange = function () {
            if (this.readyState == gREQUEST_READY_STATUS_FINISH_AND_OK && this.status == gREQUEST_STATUS_OK) {
                console.log(vXhttp.responseText); //ghi response text ra console.log
            }
        };
        vXhttp.open("GET", vAPI_URL, true);
        vXhttp.send();
    }
    
    // API lấy thông tin 01 môn học (Subjects)
    function onGetSubjectByIdClick() {
        var vAPI_URL = gBASE_URL + "/subjects/";
        var vSubjectId = 2;
        var vXhttp = new XMLHttpRequest();

        vXhttp.open("GET", vAPI_URL + vSubjectId, true);
        vXhttp.send();

        vXhttp.onreadystatechange = function () {
            if (this.readyState == gREQUEST_READY_STATUS_FINISH_AND_OK && this.status == gREQUEST_STATUS_OK) {
                console.log(vXhttp.responseText); //ghi response text ra console.log
            }
        };
    }
    // API sửa (Update) một subject
    function onEditSubjectClick() {
        const vAPI_URL = gBASE_URL + "/subjects/";
        var vSubjectId = 5; // id môn học được sửa
        // đối tượng grade sẽ được tạo mới
        var vSubjectObjRequest = {
                subjectCode: "MAT101",
                subjectName: "Toán cao cấp",
                credit: 4
            };
        
        var vXmlHttp = new XMLHttpRequest();
        vXmlHttp.open("PUT", vAPI_URL + vSubjectId, true);
        vXmlHttp.setRequestHeader("Content-Type", "application/json");
        vXmlHttp.send(JSON.stringify(vSubjectObjRequest));
        
        vXmlHttp.onreadystatechange = function () {
            if (this.readyState == gREQUEST_READY_STATUS_FINISH_AND_OK && this.status == gREQUEST_STATUS_OK) {
                console.log(vXmlHttp.responseText);
            }
        }
    }

    // API tạo (Create) một subject mới
    function onCreateSubjectClick() {
        const vAPI_URL = gBASE_URL + "/subjects/";
        // đối tượng grade sẽ được tạo mới
        var vSubjectObjRequest = {
                subjectCode: "MAT101",
                subjectName: "Toán cao cấp",
                credit: 4
            };
        
        var vXmlHttp = new XMLHttpRequest();
        vXmlHttp.open("POST", vAPI_URL, true);
        vXmlHttp.setRequestHeader("Content-Type", "application/json");
        vXmlHttp.send(JSON.stringify(vSubjectObjRequest));
        
        vXmlHttp.onreadystatechange = function () {
            if (this.readyState == gREQUEST_READY_STATUS_FINISH_AND_OK && this.status == gREQUEST_CREATE_OK) {
                console.log(vXmlHttp.responseText);
            }
        }
    }

</script>

<body>
    <div class="container mt-4">
        <div class="row form-group">
            <strong class="text-danger"> Bật console log để nhìn rõ output </strong>
        </div>
        <div class="row form-group">
            <p id="testP" class="h4"> Demo 09 API cho dự án Quản lý bảng điểm: </p>
        </div>
        <div class="row form-group">
            <button  class="btn btn-info m-1" onclick="onGetStudentListClick()">Lấy danh sách Sinh viên</button>
            <button  class="btn btn-success m-1" onclick="onGetStudentByIdClick()">Lấy thông tin 01 Sinh viên</button>
            <button  class="btn btn-info m-1" onclick="onEditStudentClick()">Sửa Sinh viên</button>
            <button  class="btn btn-success m-1" onclick="onCreateStudentClick()">Tạo mới Sinh viên</button>
            <button  class="btn btn-danger m-1" onclick="onDeleteStudentClick()">Xóa sinh viên (Delete)</button>
            <button  class="btn btn-success m-1" onclick="onGetSubjectListClick()">Lấy danh sách Môn học</button>
            <button  class="btn btn-primary m-1" onclick="onGetSubjectByIdClick()">Lấy thông tin 01 Môn học</button>
            <button  class="btn btn-success m-1" onclick="onEditSubjectClick()">Sửa môn học (Edit)</button>
            <button  class="btn btn-info m-1" onclick="onCreateSubjectClick()">Tạo mới môn học (Create)</button>
        </div>
    </div>
</body>

</html>
sample.restAPI.crud.school_v1.2.html
Đang hiển thị sample.restAPI.crud.school_v1.2.html.