<!DOCTYPE html>
<html>
<head>
    <title>Task 10.60</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<script>
    "use strict";
    /*** REGION 1 - Global variables - Vùng khai báo biến, hằng số, tham số TOÀN CỤC */
    const vPERSON_DB = 
    [
        { firstName: "John", lastName: "Doe", age: 39, citizenID: "A9127" },
        { firstName: "John", lastName: "Smith", age: 24, citizenID: "B9625" },
        { firstName: "Lara", lastName: "Croft", age: 31, citizenID: "D9142" },
        { firstName: "Fernadi", lastName: "Miguel", age: 18, citizenID: "E9442"},
        { firstName: "Lee", lastName: "Matheus", age: 81, citizenID: "G8129" }
    ];

    /*** REGION 2 - Vùng gán / thực thi hàm xử lý sự kiện cho các elements */
   
    /*** REGION 3 - Event handlers - Vùng khai báo các hàm xử lý sự kiện */
    function onPageLoading() {
        // viết code chạy thử hàm getPersonByCitizenID() dưới đây
        var vMyPersonOne = getPersonByCitizenID("G8129"); // hàm này trả về một đối tượng
        // Nếu không thấy thì :
        if (vMyPersonOne == null)
        {
            console.log("Person with inputed vid is not found");
        }
        else 
        {
            console.log("Person found by getPersonByIndex: ");
            console.log("firstName: " + vMyPersonOne.firstName);
            console.log("lastName: " + vMyPersonOne.lastName);
            console.log("age: " + vMyPersonOne.age);
            console.log("citizen ID : " + vMyPersonOne.citizenID);
        }
        
        // Bạn hãy viết code chạy thử test hàm getCarByVID() xuống bên dưới

    }
    

    /*** REGION 4 - Common funtions - Vùng khai báo hàm dùng chung trong toàn bộ chương trình*/
    // đây là 01 function đã trả lại person bởi index.
    // function getPersonByIndex(paramIndexPerson) {
    //     //if the input index not in the invalid range (index đưa vào không có trong array vPERSON_DB)
    //     if (paramIndexPerson < 0 || paramIndexPerson > vPERSON_DB.length - 1) { 
    //         return null; 
    //     }
    //     // nếu có thì return object ở vị trí đó
    //     return vPERSON_DB[paramIndexPerson];
    // }

    
    function getPersonByCitizenID(paramCitizenID) {
        var vTimThayPerson = false; //biến dùng để phát hiện ID , true là tìm thấy. Mặc định ban đầu là false
        var vThongTinPerson = 0; // giá trị sẽ chạy hết trong object, tăng dần. Đây là đk để vòng lặp ko chạy vô tận
        var vPersonObj = null; //biến dùng để gán giá trị vào sau khi tìm thấy trong vòng lặp
        while (vTimThayPerson == false && vThongTinPerson < vPERSON_DB.length) 
        {
            console.log("----------: "+vThongTinPerson +" -----  "+vPERSON_DB[vThongTinPerson].citizenID);
        if (paramCitizenID == vPERSON_DB[vThongTinPerson].citizenID) {
            vPersonObj = vPERSON_DB[vThongTinPerson];
            console.log("-------->"+vPersonObj);
            vTimThayPerson = true;
            }
            
        else{
            vThongTinPerson++;
            }
        }
        return vPersonObj;
    }
</script>

<body onload="onPageLoading()" class="bg bg-transparent">
    <div class="jumbotron">
        <h1> Test Page for Devcamp Javascrip Tasks </h1>
        <p> Press F5 to run code. Don't forget to Save your code before running. (Ctrl+S). </p>
    </div>
</body>

</html>